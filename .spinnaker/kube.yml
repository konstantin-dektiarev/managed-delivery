name: kube
application: testmanaged
serviceAccount: sekret-service-account@spinnaker-test.net
artifacts:
- name: nimak/helloworld
  type: docker
  reference: my-docker-artifact
  tagVersionStrategy: semver-tag
environments:
  - name: dev
    locations:
      account: my-k8s-account
      regions: []
    resources:
    - kind: k8s/resource@v1
      metadata:
        account: my-k8s-account
      spec:
        apiVersion: v1
        kind: Service
        metadata:
          name: hello-kubernetes
          namespace: test-keel
          annotations:
            moniker.spinnaker.io/application: testmanaged
        spec:
          type: LoadBalancer
          externalTrafficPolicy: Cluster
          ports:
          - port: 80
            targetPort: 8080
          selector:
            app: hello-kubernetes
    - kind: k8s/resource@v1
      metadata:
        account: my-k8s-west-account
      spec:
        apiVersion: apps/v1
        kind: Deployment
        metadata:
          name: hello-kubernetes
          namespace: test-keel
          annotations:
            moniker.spinnaker.io/application: testmanaged
        spec:
          replicas: 1
          selector:
            matchLabels:
              app: hello-kubernetes
          template:
            metadata:
              labels:
                app: hello-kubernetes
            spec:
              containers:
              - name: hello-kubernetes
                image: paulbouwer/hello-kubernetes:1.8
                ports:
                - containerPort: 8080